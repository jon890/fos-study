# IP Subnet

## IP 주소를 "집 주소"라고 생각해보자

예: `192.168.1.23`

이 주소는 사실 **두 부분**으로 구성돼 있음:

1. 네트워크(Network): 어떤 동네인가?
2. 호스트(Host): 그 동네 안의 어떤 집인가?

> 즉, [네트워크 부분] + [호스트 부분] 으로 되어 있음

그런데, IP 주소만 보면 어디까지가 핑계고 어디까지가 집 번호인지 모름 <br/>
그래서 등장하는 게 **CIDR 표기**

## CIDR 표기란?

예: `192.168.1.0/24`

여기서 `/24`가 무슨 뜻이냐?

"앞에서 부터 24비트를 네트워크 주소로 사용한다"라는 뜻

IP는 32비트니까

```text
네트워크 24비트 | 호스트 8비트
```

- 같은 /24 안에 있는 애들은 **같은 네트워크에 소속**
- 호스트 8비트 -> 2^8 = 256개의 주소 가능

그래서 `/24`를 **256개 주소를 가진 네트워크(Subnet)** 라고 부르는 거야

## 그럼 Subnet은 뭐야?

Subnet = Sub + Network <br/>
즉 **큰 네트워크를 더 작은 네트워크로 쪼갠 것**

예를 들어, <br/>
원래 회사 전체 네트워크가 이렇게 생겼다고 해보자

```text
192.168.0.0 ~ 192.168.255.255 (엄청 큼)
```

근데 이걸 그대로 쓰면?

- 어떤 PC가 어느 팀 소속인지 파악 불가능
- 네트워크 관리 어려움
- 브로드캐스트 트래픽 폭발
- 보안 분리도 불가

그래서 "팀별로 쪼개자!" 하고 만드는 게 **Subnet**

```text
192.168.1.0/24 -> 개발팀
192.168.2.0/24 -> 운영팀
192.168.3.0/24 -> 인프라팀
```

## 왜 Subnet을 나누는 거야? (핵심 3가지)

- **1. 보안 분리**

  - 개발팀 네트워크와 운영팀 네트워크를 격리
  - 서로 직접 접근 못하게 방화벽 규칙 설정 가능

- **2. 성능 향상**

  - 브로드 캐스트 도메인이 작아짐 -> 네트워크 안정

- **3. 관리 편의**
  - 팀별, 서비스별 IP 관리 가능
  - 예: AWS에서 VPC 안에
    - public subnet
    - private subnet
    - db subnet
    - 이런 걸 나누는 이유도 이것 때문

## 자세하게 설명하면

### 같은 Subnet에 있으면?

- 스위치를 통해 **L2에서 바로 통신 가능**

### 다른 Subnet이면?

- 반드시 **라우터(L3)** 를 거처야 함
- (AWS에서는 IGW, NAT GW, Route Table 같은 게 이것)
- 그래서 네트워크 구조를 잡을 때, Subnet을 어떻게 쪼개느냐가 매우 중요함
